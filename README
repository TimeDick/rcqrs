= Ruby CQRS with Event Sourcing

== Getting Started

Dependencies are managed using Bundler (http://gembundler.com/)

$ sudo gem install bundler

Install all of the required gems for this application

$ sudo bundle install

== Testing

Run the RSpec specifications 

$ spec spec/

== Basic Design Overview

  UI
  - display query results
  - create commands
  - basic validation of command (e.g. required fields, uniqueness using queries)

  command					CreateCompanyCommand

  command bus
  - validates command
  - routes command to registered handler

  <command> handler			CreateCompanyHandler
  - loads corresponding aggregate root
  - executes action on aggregate root
  
  aggregate root			Company
  - guard clause (raises exceptions when invalid commands applied)
  - calculations (but no state changes)
  - create & raise corresponding domain event

  domain event				CompanyCreatedEvent
  
  aggregate root
  - updates state
  
  event bus
  - persist event to event store
  - routes event to registered handler(s)

  <event> handler			CompanyCreatedHandler
  - update denormalized data store(s)
  - email sending
  - execute long running processes (e.g. 3rd party APIs, file upload)