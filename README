redis
github queue library

def subclasses_of(superclass) 
	subclasses = [] 
	ObjectSpace.each_object(Class) do |k| 
		next if !k.ancestors.include?(superclass) || superclass == k || 
		k.to_s.include?('::') || subclasses.include?(k.to_s) 
		subclasses << k.to_s 
	end 
	subclasses 
end 


  UI
  - display query results
  - create command
  - basic validation of command (e.g. required fields, uniqueness using queries)

  command					CreateCompanyCommand

  command bus
  - validates command
  - routes command to registered handler

  <command> handler			CreateCompanyHandler
  - loads corresponding aggregate root
  - executes action on aggregate root
  
  aggregate root			Company
  - guard clause (raises exceptions when invalid commands applied)
  - calculations (but no state changes)
  - create & raise corresponding domain event

  domain event				CompanyCreatedEvent
  
  aggregate root
  - updates state
  
  event bus
  - persist event to event store
  - routes event to registered handler(s)

  <event> handler			CompanyCreatedHandler
  - update denormalized data store(s)
  - email sending
  - execute long running processes (e.g. 3rd party APIs, file upload)